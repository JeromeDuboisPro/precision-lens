<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrecisionLens - Visualizing Floating-Point Performance Tradeoffs</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Plotly.js for charts -->
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>

    <!-- Custom styling -->
    <link rel="stylesheet" href="style.css">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100">

    <!-- Header -->
    <header class="bg-gradient-to-r from-blue-900 to-purple-900 py-12 px-6">
        <div class="max-w-7xl mx-auto">
            <h1 class="text-5xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-400">
                PrecisionLens
            </h1>
            <p class="text-2xl text-gray-300 mb-6">
                Visualizing Precision-Performance Tradeoffs in Numerical Computing
            </p>
            <p class="text-lg text-gray-400 max-w-3xl">
                How do modern AI accelerators leverage FP8/FP16 for massive speedups?
                Watch the power method algorithm converge across different floating-point
                precisions in real-time.
            </p>
        </div>
    </header>

    <!-- Control Panel -->
    <div class="bg-gray-800 border-b border-gray-700">
        <div class="max-w-7xl mx-auto px-6 py-6">
            <div class="flex flex-wrap items-center gap-6">

                <!-- Condition Number Selector -->
                <div class="flex items-center gap-3">
                    <label class="text-sm font-medium text-gray-300">
                        Condition Number:
                    </label>
                    <select id="conditionSelector"
                            class="bg-gray-700 text-white px-4 py-2 rounded-lg border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="10">10 (Well-conditioned)</option>
                        <option value="100" selected>100 (Moderate)</option>
                        <option value="1000">1000 (Ill-conditioned)</option>
                    </select>
                </div>

                <!-- Play/Pause Button -->
                <button id="playPauseBtn"
                        class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center gap-2">
                    <span id="playIcon">â–¶</span>
                    <span id="playText">Play</span>
                </button>

                <!-- Speed Control -->
                <div class="flex items-center gap-3">
                    <label class="text-sm font-medium text-gray-300">
                        Speed:
                    </label>
                    <select id="speedSelector"
                            class="bg-gray-700 text-white px-4 py-2 rounded-lg border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="0.5">0.5x</option>
                        <option value="1" selected>1x</option>
                        <option value="2">2x</option>
                        <option value="5">5x</option>
                        <option value="10">10x</option>
                    </select>
                </div>

                <!-- Timeline Scrubber -->
                <div class="flex-1 flex items-center gap-3">
                    <span class="text-sm text-gray-400 whitespace-nowrap" id="currentTime">0.000s</span>
                    <input type="range"
                           id="timeline"
                           min="0"
                           max="100"
                           value="0"
                           class="flex-1 h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500">
                    <span class="text-sm text-gray-400 whitespace-nowrap" id="maxTime">0.000s</span>
                </div>

                <!-- Reset Button -->
                <button id="resetBtn"
                        class="bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium transition-colors">
                    Reset
                </button>
            </div>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div class="max-w-7xl mx-auto px-6 py-8">

        <!-- Convergence Plots Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">

            <!-- FP64 -->
            <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold text-blue-400">FP64 (Double Precision)</h3>
                    <div id="status-fp64" class="px-3 py-1 rounded-full text-xs font-medium bg-gray-700 text-gray-400">
                        Ready
                    </div>
                </div>
                <div id="plot-fp64" class="h-64"></div>
                <div class="mt-4 grid grid-cols-6 gap-4 text-sm">
                    <div>
                        <div class="text-gray-400">Iteration</div>
                        <div id="iter-fp64" class="text-lg font-semibold">0</div>
                    </div>
                    <div>
                        <div class="text-gray-400">Eigenvalue</div>
                        <div id="eigenvalue-fp64" class="text-lg font-semibold">â€”</div>
                    </div>
                    <div>
                        <div class="text-gray-400">Error</div>
                        <div id="error-fp64" class="text-lg font-semibold">â€”</div>
                    </div>
                    <div>
                        <div class="text-gray-400">Time</div>
                        <div id="time-fp64" class="text-lg font-semibold">â€”</div>
                    </div>
                    <div>
                        <div class="text-gray-400">FLOPS</div>
                        <div id="flops-fp64" class="text-lg font-semibold">â€”</div>
                    </div>
                    <div>
                        <div class="text-gray-400">Bandwidth</div>
                        <div id="bandwidth-fp64" class="text-lg font-semibold">â€”</div>
                    </div>
                </div>
            </div>

            <!-- FP32 -->
            <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold text-green-400">FP32 (Single Precision)</h3>
                    <div id="status-fp32" class="px-3 py-1 rounded-full text-xs font-medium bg-gray-700 text-gray-400">
                        Ready
                    </div>
                </div>
                <div id="plot-fp32" class="h-64"></div>
                <div class="mt-4 grid grid-cols-6 gap-4 text-sm">
                    <div>
                        <div class="text-gray-400">Iteration</div>
                        <div id="iter-fp32" class="text-lg font-semibold">0</div>
                    </div>
                    <div>
                        <div class="text-gray-400">Eigenvalue</div>
                        <div id="eigenvalue-fp32" class="text-lg font-semibold">â€”</div>
                    </div>
                    <div>
                        <div class="text-gray-400">Error</div>
                        <div id="error-fp32" class="text-lg font-semibold">â€”</div>
                    </div>
                    <div>
                        <div class="text-gray-400">Time</div>
                        <div id="time-fp32" class="text-lg font-semibold">â€”</div>
                    </div>
                    <div>
                        <div class="text-gray-400">FLOPS</div>
                        <div id="flops-fp32" class="text-lg font-semibold">â€”</div>
                    </div>
                    <div>
                        <div class="text-gray-400">Bandwidth</div>
                        <div id="bandwidth-fp32" class="text-lg font-semibold">â€”</div>
                    </div>
                </div>
            </div>

            <!-- FP16 -->
            <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold text-yellow-400">FP16 (Half Precision)</h3>
                    <div id="status-fp16" class="px-3 py-1 rounded-full text-xs font-medium bg-gray-700 text-gray-400">
                        Ready
                    </div>
                </div>
                <div id="plot-fp16" class="h-64"></div>
                <div class="mt-4 grid grid-cols-6 gap-4 text-sm">
                    <div>
                        <div class="text-gray-400">Iteration</div>
                        <div id="iter-fp16" class="text-lg font-semibold">0</div>
                    </div>
                    <div>
                        <div class="text-gray-400">Eigenvalue</div>
                        <div id="eigenvalue-fp16" class="text-lg font-semibold">â€”</div>
                    </div>
                    <div>
                        <div class="text-gray-400">Error</div>
                        <div id="error-fp16" class="text-lg font-semibold">â€”</div>
                    </div>
                    <div>
                        <div class="text-gray-400">Time</div>
                        <div id="time-fp16" class="text-lg font-semibold">â€”</div>
                    </div>
                    <div>
                        <div class="text-gray-400">FLOPS</div>
                        <div id="flops-fp16" class="text-lg font-semibold">â€”</div>
                    </div>
                    <div>
                        <div class="text-gray-400">Bandwidth</div>
                        <div id="bandwidth-fp16" class="text-lg font-semibold">â€”</div>
                    </div>
                </div>
            </div>

            <!-- FP8 -->
            <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold text-orange-400">FP8 (Simulated)</h3>
                    <div id="status-fp8" class="px-3 py-1 rounded-full text-xs font-medium bg-gray-700 text-gray-400">
                        Ready
                    </div>
                </div>
                <div id="plot-fp8" class="h-64"></div>
                <div class="mt-4 grid grid-cols-6 gap-4 text-sm">
                    <div>
                        <div class="text-gray-400">Iteration</div>
                        <div id="iter-fp8" class="text-lg font-semibold">0</div>
                    </div>
                    <div>
                        <div class="text-gray-400">Eigenvalue</div>
                        <div id="eigenvalue-fp8" class="text-lg font-semibold">â€”</div>
                    </div>
                    <div>
                        <div class="text-gray-400">Error</div>
                        <div id="error-fp8" class="text-lg font-semibold">â€”</div>
                    </div>
                    <div>
                        <div class="text-gray-400">Time</div>
                        <div id="time-fp8" class="text-lg font-semibold">â€”</div>
                    </div>
                    <div>
                        <div class="text-gray-400">FLOPS</div>
                        <div id="flops-fp8" class="text-lg font-semibold">â€”</div>
                    </div>
                    <div>
                        <div class="text-gray-400">Bandwidth</div>
                        <div id="bandwidth-fp8" class="text-lg font-semibold">â€”</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Error Comparison Plot -->
        <div class="bg-gray-800 rounded-lg p-6 border border-gray-700 mb-8">
            <h3 class="text-xl font-semibold mb-4">Eigenvalue Error Comparison vs FP64 Baseline</h3>
            <div id="plot-comparison" class="h-80"></div>
            <p class="text-sm text-gray-400 mt-4">
                This plot shows the relative error between each precision's eigenvalue estimate and FP64's eigenvalue estimate at each iteration.
                Calculated as |eigenvalue_FPx - eigenvalue_FP64| / |eigenvalue_FP64|. Lower values indicate closer agreement with FP64.
            </p>
        </div>

        <!-- Performance Metrics & Comparison -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

            <!-- Performance Gauges -->
            <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
                <h3 class="text-xl font-semibold mb-6">Performance Metrics</h3>
                <div class="grid grid-cols-2 gap-6">
                    <div class="text-center">
                        <div id="gauge-flops" class="h-32"></div>
                        <div class="text-sm text-gray-400 mt-2">FLOPS (MFLOPS)</div>
                    </div>
                    <div class="text-center">
                        <div id="gauge-bandwidth" class="h-32"></div>
                        <div class="text-sm text-gray-400 mt-2">Bandwidth (GB/s)</div>
                    </div>
                </div>
            </div>

            <!-- Comparison Table -->
            <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
                <h3 class="text-xl font-semibold mb-6">Final Comparison</h3>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead>
                            <tr class="border-b border-gray-700">
                                <th class="text-left py-2 text-gray-400 font-medium">Metric</th>
                                <th class="text-right py-2 text-blue-400 font-medium">FP64</th>
                                <th class="text-right py-2 text-green-400 font-medium">FP32</th>
                                <th class="text-right py-2 text-yellow-400 font-medium">FP16</th>
                                <th class="text-right py-2 text-orange-400 font-medium">FP8</th>
                            </tr>
                        </thead>
                        <tbody id="comparisonTableBody" class="text-gray-300">
                            <!-- Populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Insights Panel -->
        <div class="mt-8 bg-gradient-to-r from-blue-900/30 to-purple-900/30 rounded-lg p-6 border border-blue-800/50">
            <h3 class="text-xl font-semibold mb-4">ðŸ’¡ Key Insights</h3>
            <div id="insightsPanel" class="space-y-3 text-gray-300">
                <!-- Populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 border-t border-gray-700 py-8 mt-12">
        <div class="max-w-7xl mx-auto px-6 text-center text-gray-400">
            <p class="mb-2">
                <strong>PrecisionLens</strong> - Exploring precision-performance frontiers in numerical computing
            </p>
            <p class="text-sm">
                Modern AI accelerators like NVIDIA's Hopper architecture leverage reduced precision (FP8/FP16)
                for massive throughput gains. This tool visualizes the tradeoffs.
            </p>
            <p class="mt-4 text-xs">
                <a href="https://github.com/JeromeDuboisPro/precision-lens"
                   class="text-blue-400 hover:text-blue-300 transition-colors">
                    View on GitHub
                </a>
            </p>
        </div>
    </footer>

    <!-- Dashboard JavaScript -->
    <script src="dashboard.js"></script>
</body>
</html>
